#!/usr/bin/env crystal

require "../src/telegram/generator/generator"

autogen_comment = <<-CRYSTAL
# This file is autogenerated. Please change the generator code instead.
# Copyright (c) 2022 - Chris Watson and contributors
# Licensed under the MIT License. See the LICENSE file for details.
CRYSTAL

types_header = <<-CRYSTAL
#{autogen_comment}
CRYSTAL

methods_header = <<-CRYSTAL
#{autogen_comment}
CRYSTAL

json = Telegram::Generator.fetch_api_json
generator = Telegram::Generator.new(json)
generator.write_types("src/telegram/api/generated/types.cr", types_header, "class Telegram::API")
generator.write_methods("src/telegram/api/generated/methods.cr", methods_header, "class Telegram::API")